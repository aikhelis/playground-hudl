# playground-hudl

## Running Tests Locally

**Install Dependencies**  
```npm install``` or the equivalent command for your package manager to install all required dependencies


**Configure Environment Variables**  
Copy `.env.local.example` to `.env.local` (the file is git-ignored) and update the values as needed.

**Run the Test Suite**  
`npx playwright test` to run; `npx playwright test --ui` to debug locally (or install Playwright plug-in for your IDE).

Check `package.json` if there is a costomised command for your use case.

**Troubleshooting**  
If tests fail, verify that you have the correct environment variables and configuration settings.

## Test Coverage

_This report aids to illustrate the thought process behind test design. It's auto-generated by co-polit analyzing the current tests folder and file structure and naming conventions. Ensure it remains updated as tests evolve or switch to more fit-for-purpose coverage tool._

Keep tests folder structure and spec naming updated as tests are added or refactored to ensure the report remains accurate.

### tests/auth

**login.spec.ts** - User Login flow

Happy-path tests:
- [x] successful log in with valid credentials
- [ ] edit email as a detached user flow step

Negative tests:
- [ ] should display an error message with invalid credentials:
    - invalid password for a registered email
    - not a registered email with a valid password from another account
    - missing email (password field isn't available)
    - missing password

Web form security tests:
  - [ ] SQL Injection attempt in username field
  - [ ] XSS attempt in username field

### Next tests can be:
- **forgottenPassword.spec.ts** - Recover login credentials
- **createAccount.spec.js** - User registration, including duplicate registrations
- **loginWithSocials.spec.ts** - Log in with a social netwrok account (Google, Facebook, Apple)
- **authorization.spec.js** - Dashboard Components based on 
    - User Role (Club Manager, Assistant Coach, Player etc)
    - Asset Assignments (Federation, League, Club etc)
    - Permissions
- **non-functional tests** (as relevant for login/register):
    - client-side performance (such as lighthouse), browser/device/mobile-first compatibility and accessibility tests 
    - server-side performance, stress, soak, scalability, geo-scalability and/or chaos testing 

## Design Notes

Start-small approach is used aspired by principles of [YAGNI](https://en.wikipedia.org/wiki/You_aren%27t_gonna_need_it) and [AHA!](https://kentcdodds.com/blog/aha-programming)

Domain specific dimensions and patterns may emerge as we go, and need to be accounted for on when/if basis.

For example, the following can be anticipated:

- cross environment configurations
- cross platform testing (browser/OS/device)
- more rigorous parallelisation/sharding
- user sessions clash management (in parallel or coinciding test runs)
- higher level of UI abstraction (eg screenplay pattern, Playwright page fixtures such as user role specific)
- discuss to remove `data-qa-id` from Production via build tools (for engineering best practices/PR and security considerations)
- test data management approaches (stubbing/mocking for client-side logic tests or against 3rd party services, data seeding/tidyup for full e2e tests, etc), data abstraction layer, api steps library, etc

## CI/CD
Initial [GHA workflow](https://github.com/aikhelis/playground-hudl/actions/workflows/playwright.yml) for playwright tests with:
- trigerred on workflow-dispatch and on push to main
- injects user creds from GH repository secrets
- runs tests against Production
- runs tests in a single headless browser
- saves html report and trace assets on every run
